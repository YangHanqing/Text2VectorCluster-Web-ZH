<!DOCTYPE html>
<html>
<head>
    <title>Test Transformers.js WebGPU Support</title>
</head>
<body>
    <div id="status">Testing WebGPU support...</div>
    <script>
        // 首先测试基础 WebGPU 支持
        const status = document.getElementById('status');
        status.innerHTML += '<br>Basic WebGPU API support: ' + ('gpu' in navigator);

        // 测试 WebGPU 设备创建
        async function testWebGPUDevice() {
            try {
                if ('gpu' in navigator) {
                    const adapter = await navigator.gpu.requestAdapter();
                    if (!adapter) {
                        status.innerHTML += '<br>Error: Could not request WebGPU adapter';
                        return;
                    }
                    status.innerHTML += '<br>Successfully got WebGPU adapter';

                    const device = await adapter.requestDevice();
                    if (!device) {
                        status.innerHTML += '<br>Error: Could not request WebGPU device';
                        return;
                    }
                    status.innerHTML += '<br>Successfully got WebGPU device';
                    
                    // 显示适配器信息
                    const info = await adapter.requestAdapterInfo();
                    status.innerHTML += '<br>GPU Info:';
                    status.innerHTML += '<br>- Vendor: ' + info.vendor;
                    status.innerHTML += '<br>- Architecture: ' + info.architecture;
                }
            } catch (e) {
                status.innerHTML += '<br>Error testing WebGPU: ' + e.message;
            }
        }

        testWebGPUDevice();
    </script>
</body>
</html>
